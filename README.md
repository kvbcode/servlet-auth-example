## Аутентификация с HttpServlet

Многомодульный Мaven проект содержит примеры веб-приложений со стандартной процедурой аутентификации. Они используют спецификацию Jakarta Servlet 6.0 и предназначены для запуска в контейнере сервлетов Tomcat 10.1.

Аутентификация и авторизация выполняются стандартными средствами веб-контейнера. В модуле Launcher, выполняется загрузка и регистрация тестовых пользователей из файла `users.json` в Embedded Tomcat.

|Пользователь|Пароль|Роли|
|---         |---   |--- |
|admin       |123   |ROLE_ADMIN, ROLE_USER|
|user        |123   |ROLE_USER|


### `Сборка и запуск в Maven`

Вызов сборки и запуск приложений следует выполнять из корневой папки модульного проекта.

```shell
mvn clean package
launcher\target\bin\webapp
```

Приложения будут доступны по следующим путям:

- http://localhost:8080/jakarta-annotations/
- http://localhost:8080/jsecuritycheck-webxml/


### **`jsecuritycheck-webxml`**

Пример не использует аннотации Servlet 3.0, поэтому настройки сервлетов определены только в дескрипторе развертывания `web.xml`.

Если анонимный пользователь попытается получить доступ к защищенному ресурсу, то сначала он перенаправляется на форму авторизации. Логин и пароль пользователя передается в POST запросе на стандартную точку входа `j_security_check`. Контейнер сервлетов проводит аутентификацию. При успешном входе пользователя выполняется автоматическое обращение к первоначальному ресурсу.


### **`jakarta-annotations`**

Пример не использует файл `web.xml`, поэтому настройка сервлетов проводится только с помощью аннотаций.

Web-контейнер Tomcat не поддерживает необходимую аннотацию Jakarta Security `@FormAuthenticationMechanismDefinition`. Для обслуживания точки аутентификации создан отдельный сервлет LoginServlet. Информация о пользователе извлекается из атрибутов POST запроса и передается в стандартый метод Request.login().


### **`launcher`**

Модуль создан для отладки и удобного запуска веб-приложений в Embedded Tomcat. Весь проект можно запускать из IDE методом `com.cyber.web.Launcher.main()`.
